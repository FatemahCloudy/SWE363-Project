<!DOCTYPE html>
<html>
<head>
  <title>Fix Login - Memory of Place</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; text-align: center; }
    .fixing { color: #3b82f6; font-size: 20px; margin: 40px 0; }
    .info { background: #f0f9ff; padding: 15px; border-radius: 5px; margin: 20px 0; }
  </style>
</head>
<body>
  <h1>Fixing Your App...</h1>
  <div class="fixing">⏳ Please wait, resetting storage...</div>
  
  <div class="info" id="message">
    Clearing old data and creating fresh demo accounts...
  </div>
  
  <script>
    // Auto-run on page load
    (function() {
      // Clear everything
      localStorage.clear();
      sessionStorage.clear();
      
      // Create fresh demo users
      const adminUser = {
        id: crypto.randomUUID(),
        username: 'admin',
        email: 'admin@memoryplace.com',
        password: 'admin123',
        fullName: 'Admin User',
        role: 'admin',
        bio: 'Administrator - Full access to all features',
        avatarUrl: null,
        coverUrl: null,
        location: 'Memory Place HQ',
        createdAt: new Date().toISOString(),
      };
      
      const regularUser = {
        id: crypto.randomUUID(),
        username: 'sarah',
        email: 'sarah@memoryplace.com',
        password: 'sarah123',
        fullName: 'Sarah Johnson',
        role: 'creator',
        bio: 'Traveler and photographer capturing moments',
        avatarUrl: null,
        coverUrl: null,
        location: 'San Francisco, CA',
        createdAt: new Date().toISOString(),
      };
      
      localStorage.setItem('memoryplace_users', JSON.stringify([adminUser, regularUser]));
      localStorage.setItem('memoryplace_memories', JSON.stringify([]));
      localStorage.setItem('memoryplace_likes', JSON.stringify([]));
      localStorage.setItem('memoryplace_comments', JSON.stringify([]));
      localStorage.setItem('memoryplace_follows', JSON.stringify([]));
      localStorage.setItem('memoryplace_saved_memories', JSON.stringify([]));
      localStorage.setItem('memoryplace_messages', JSON.stringify([]));
      localStorage.setItem('memoryplace_notifications', JSON.stringify([]));
      
      document.getElementById('message').innerHTML = 
        '<strong>✓ Done!</strong><br><br>' +
        'Demo accounts created:<br>' +
        'Username: <code>admin</code> / Password: <code>admin123</code><br>' +
        'Username: <code>sarah</code> / Password: <code>sarah123</code><br><br>' +
        'Redirecting to login page...';
      
      setTimeout(() => {
        window.location.href = '/login?nocache=' + Date.now();
      }, 2000);
    })();
  </script>
</body>
</html>
